
from unittest import TestCase
import os

from badimsicore_sniffing_gsmband_search import *


class TestRadioBandSearcher(TestCase):

    def setUp(self):
        self.exec_path = os.path.dirname(__file__)
        capture = os.path.join(self.exec_path, 'resources/clean/all_gsm_channels_arfcn.csv')
        self.arfcn_csv = os.path.abspath(capture)

        self.orange_gsm_900 =   [890200000.0, 890400000.0, 890600000.0, 890800000.0, 891000000.0, 891200000.0, 891400000.0, 891600000.0, 891800000.0, 892000000.0, 892200000.0, 892400000.0, 892600000.0, 892800000.0, 893000000.0, 893200000.0, 893400000.0, 893600000.0, 893800000.0, 894000000.0, 894200000.0, 894400000.0, 894600000.0, 894800000.0, 895000000.0, 895200000.0, 895400000.0, 895600000.0, 895800000.0, 896000000.0, 896200000.0, 896400000.0, 896600000.0, 896800000.0, 897000000.0, 897200000.0, 897400000.0, 897600000.0, 897800000.0, 898000000.0, 898200000.0, 898400000.0, 898600000.0, 898800000.0, 899000000.0, 899200000.0, 899400000.0, 899600000.0, 899800000.0, 900000000.0, 900200000.0, 900400000.0, 900600000.0, 900800000.0, 901000000.0, 901200000.0, 901400000.0, 901600000.0, 901800000.0, 902000000.0, 902200000.0, 902400000.0]
        self.sfr_gsm_900  = [902600000.0, 902800000.0, 903000000.0, 903200000.0, 903400000.0, 903600000.0, 903800000.0, 904000000.0, 904200000.0, 904400000.0, 904600000.0, 904800000.0, 905000000.0, 905200000.0, 905400000.0, 905600000.0, 905800000.0, 906000000.0, 906200000.0, 906400000.0, 906600000.0, 906800000.0, 907000000.0, 907200000.0, 907400000.0, 907600000.0, 907800000.0, 908000000.0, 908200000.0, 908400000.0, 908600000.0, 908800000.0, 909000000.0, 909200000.0, 909400000.0, 909600000.0, 909800000.0, 910000000.0, 910200000.0, 910400000.0, 910600000.0, 910800000.0, 911000000.0, 911200000.0, 911400000.0, 911600000.0, 911800000.0, 912000000.0, 912200000.0, 912400000.0, 912600000.0, 912800000.0, 913000000.0, 913200000.0, 913400000.0, 913600000.0, 913800000.0, 914000000.0, 914200000.0, 914400000.0, 914600000.0, 914800000.0]
        self.bouygues_egsm_900  = [880200000.0, 880400000.0, 880600000.0, 880800000.0, 881000000.0, 881200000.0, 881400000.0, 881600000.0, 881800000.0, 882000000.0, 882200000.0, 882400000.0, 882600000.0, 882800000.0, 883000000.0, 883200000.0, 883400000.0, 883600000.0, 883800000.0, 884000000.0, 884200000.0, 884400000.0, 884600000.0, 884800000.0, 885000000.0, 885200000.0, 885400000.0, 885600000.0, 885800000.0, 886000000.0, 886200000.0, 886400000.0, 886600000.0, 886800000.0, 887000000.0, 887200000.0, 887400000.0, 887600000.0, 887800000.0, 888000000.0, 888200000.0, 888400000.0, 888600000.0, 888800000.0, 889000000.0, 889200000.0, 889400000.0, 889600000.0, 889800000.0]

    def test_get_radio_band_by_network_operator_orange(self):
        rbs = RadioBandSearcher(self.arfcn_csv)
        self.assertEquals(rbs.get_arfcn("orange", "GSM-900"), self.orange_gsm_900)

    def test_get_radio_band_by_network_operator_sfr(self):
        rbs = RadioBandSearcher(self.arfcn_csv)
        self.assertEquals(rbs.get_arfcn("sfr", "GSM-900"), self.sfr_gsm_900)

    def test_get_radio_band_by_network_operator_bouy(self):
        rbs = RadioBandSearcher(self.arfcn_csv)
        self.assertEquals(rbs.get_arfcn("bouygues_telecom", "EGSM-900"), self.bouygues_egsm_900)

    def test_get_radio_band_by_network_operator_bouy_none(self):
        rbs = RadioBandSearcher(self.arfcn_csv)
        self.assertEquals(rbs.get_arfcn("bouygues_telecom", "GSM-900"), [])
